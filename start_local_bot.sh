#!/bin/bash
# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞

echo "ü§ñ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞..."

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω
if [ -z "$BOT_TOKEN" ]; then
    echo "‚ùå BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–≥—Ä—É–∂–∞—é –∏–∑ .env.local..."
    export $(cat .env.local | xargs)
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω
if [ -z "$BOT_TOKEN" ]; then
    echo "‚ùå BOT_TOKEN –≤—Å–µ –µ—â–µ –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo "üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env.local"
    exit 1
fi

echo "‚úÖ BOT_TOKEN –Ω–∞–π–¥–µ–Ω"
echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é –±–æ—Ç–∞..."
echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–æ–≤–∫–∞: Ctrl+C"
echo ""

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
python run_simple.py
